<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>game</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
<link rel='stylesheet' href='https://maxst.icons8.com/vue-static/landings/line-awesome/font-awesome-line-awesome/css/all.min.css'><link rel="stylesheet" href="./style.css">
<script>
let site1 = getCurrentURL();
var name = new URL(site1).host;
console.log(name);
const encodedData = "WyJrYXJkbmE0bGlmZS5jZiIsImthcmRuYTRsaWZlLmdhIiwia2FyZG5hNGxpZmUuZ3EiLCJrYXJkbmE0bGlmZS5tbCIsImthcmRuYTRsaWZlLnRrIiwia2FyZG5hLmNmIiwia2FyZG5hLm1sIiwia2FyZG5hLnh5eiIsInJpcGthcmRuYS5jZiIsInJpcGthcmRuYS5tbCIsInJpcGthcmRuYS50ayIsInJpcGthcmRuYS5ncSIsInJpcGthcmRuYS5nYSIsInJpcHJpcGthcmRuYS5nYSIsInJpcHJpcGthcmRuYS5ncSIsInJpcHJpcGthcmRuYS50ayIsInJpcHJpcGthcmRuYS5tbCIsInJpcHJpcGthcmRuYS5jZiIsInRleGFzZmVldC5nYSJd"; // Encoded data
const decodedString = atob(encodedData); // Decode the Base64 string
const myArray = JSON.parse(decodedString); // Convert the JSON string to an array
const myVariable = name;
if (myArray.includes(myVariable)) {
	var url = 'bg.' + name;
} else {
	console.log("Its working!!!")
	var url = 'bg.mkardna.de';
}
console.log(url);
function getCurrentURL () {
return window.location.href
}
</script>

<script>

</script>
<script src="card.js"></script>

</head>
<body>
	<h1>Welcome To Ka<vbr>rdna</vbr> Ga<wbr>mes</h1>
	<br>
	<h3> Open Games In New Tab</h3>
	<label class="switch">
		<input type="checkbox" id="mySwitch"><span class="slider round"></span>
	</label>
	<br>
	<div class="input-area">
		<input type="text" id="searchInput" placeholder="Enter a game name" autocomplete="off">
		<ul id="autocompleteList"></ul>
		<script>
			const games = combinedArr;
			const autocompleteList = document.getElementById('autocompleteList');
			// Function to search for a game by name
			function searchGame(input) {
				var searchQuery = input.value.toLowerCase();
	
				// Filter games based on search query
				var filteredGames = games.filter(function (game) {
					return game.name.toLowerCase().includes(searchQuery);
				});
	
				// Check if any games matched the search query
				if (filteredGames.length > 0) {
					// Assuming you have your own launchGame function, replace the console.log with your implementation
					launchGame(filteredGames[0]);
				} else {
					console.log("Game not found");
				}
			}
	
			// Function to launch a game
			function launchGame(game) {
				console.log("Launching game:", game.name);
				console.log("URL:", game.url);
				document.addEventListener("DOMContentLoaded", function() {
				let mySwitch = document.getElementById("mySwitch");
			if (mySwitch) {
				mySwitch.addEventListener("change", function() {
				if (this.checked) {
					openinnewtab++;
				} else {
					openinnewtab--;
				}
				console.log(openinnewtab);
				});
			} else {
				console.error("Could not find element with ID 'mySwitch'");
			}
			});
				console.log(openinnewtab);
				if (openinnewtab === 1){
					verycoolfuntion4();
				}
				else{
					let temp_url2 = btoa(game.url);
						if (game.url.startsWith('http')) {
							var src = "https://" + url + "/uv.html#" + temp_url2
						} else {
							var src = game.url
						}
					window.open(src,"_self")
				function verycoolfuntion4(){
					let win = window.open('./plyr/')
					let temp_url2 = btoa(game.url);
					if (game.url.startsWith('http')) {
						var src = "https://" + url + "/uv.html#" + temp_url2
					} else {
						var src = game.url
					}
					setTimeout(function(){let iframe = win.document.createElement('iframe'); iframe.style.position = "absolute"; iframe.style.top = "0"; iframe.style.bottom = "0"; iframe.style.left = "0"; iframe.style.right = "0"; iframe.style.width = "100%"; iframe.style.height = "100%"; iframe.style.border = "none"; iframe.style.margin = "none"; iframe.style.zIndex = "999999"; iframe.src = src; win.document.body.appendChild(iframe)}, 100); 
				}
						}};
	
			// Function to handle key press events
			function handleKeyPress(event) {
				// Check if the Enter key is pressed
				if (event.keyCode === 13) {
					searchGame(event.target);
				}
			}
	
			// Function to handle input change events
			function handleInputChange(event) {
				var searchQuery = event.target.value.toLowerCase();
	
				// Check if the search query is empty
				if (searchQuery === "") {
					// Clear autocomplete suggestions
					autocompleteList.innerHTML = "";
					return;
				}
	
				// Filter games based on search query
				var filteredGames = games.filter(function (game) {
					return game.name.toLowerCase().includes(searchQuery);
				});
	
				// Create an array of matching game names
				var matchingGameNames = filteredGames.map(function (game) {
					return game.name;
				});
	
				// Show autocomplete suggestions
				showAutocompleteSuggestions(matchingGameNames);
			}
	
			// Function to show autocomplete suggestions
			function showAutocompleteSuggestions(suggestions) {
				autocompleteList.innerHTML = ""; // Clear previous suggestions
	
				// Create and append suggestion elements
				suggestions.forEach(function (suggestion) {
					var suggestionElement = document.createElement("li");
					suggestionElement.textContent = suggestion;
					suggestionElement.addEventListener("click", function () {
						searchInput.value = suggestion;
						searchGame(searchInput);
						autocompleteList.innerHTML = ""; // Clear suggestions after selection
					});
					autocompleteList.appendChild(suggestionElement);
				});
			}
	
			// Add event listeners to the input field
			var searchInput = document.getElementById("searchInput"); // Replace "searchInput" with the ID of your input field
			searchInput.addEventListener("keydown", handleKeyPress);
			searchInput.addEventListener("input", handleInputChange);
		</script>
	
		
	</div>
	<br>
	<br>
<div>
	<h1>Top 3  Ga<vbr></vbr>mes</h1>
	<ul id="hot"class="game-cards"></ul>
	<br>
	<h1 style="display: none;">New G<vbr>a</vbr>mes</h1>
	<ul id="new" class="game-cards"></ul>
	<br>
	<h1>All  Ga<vbr></vbr>mes</h1>
	<ul id="all" class="game-cards"></ul>
</div>
</body>
</html>
